version: '3.8'
services:
    db:
        build: 
            context: ./DB
            dockerfile: ./Dockerfile
        image: 'detectordb:1'
        environment:
            - DB_NAME=minidetector
            - DB_USER=detector
            - DB_PWD=passw123
        ports: 
            - 5432:5432
    minidetector:
        build:
            context: ./minidetector
            dockerfile: Dockerfile
        image: 'minidetector:1'
        environment: 
            - DB_SEVER=db
            - DB_NAME=minidetector
            - DB_USER=detector
            - DB_PWD=passw123
        depends_on:
            - db
        command: '--debug'
    
    ui:
        build:
            context: ./WebUI
            dockerfile: Dockerfile
        image: 'detectorui:1'
        environment:
            - DB_SEVER=db
            - DB_NAME=minidetector
            - DB_USER=detector
            - DB_PWD=passw123
        depends_on:
            - db
        ports: 
            - 80:8080
        command: "--debug"

        